<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Magic!!</title>

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{--accent:#c7d7ff}
*{margin:0;padding:0;box-sizing:border-box}

@media (max-width: 768px){

  body{
    overflow: hidden;
  }

  /* scale entire scene */
  .hero{
    transform: scale(0.85);
    transform-origin: top center;
  }

  /* title */
  h1{
    font-size: 2rem;
    letter-spacing: 0.05em;
  }

  /* subtitle text */
  .music{
    font-size: 0.95rem;
    padding: 0 1rem;
  }

  /* enter button */
  .enter-btn{
    margin-top: 4rem;
    padding: .6rem 1rem;
    font-size: .95rem;
  }

  /* envelopes */
  .hogwarts-envelope{
    width: 220px;
    height: 140px;
  }

  .letter p{
    font-size: 14px;
  }

  /* buttons ‚Äî thumb friendly */
  .home-btn,
  .next-letter-btn{
    bottom: 14px;
    font-size: .9rem;
    padding: .6rem 1rem;
  }

  .home-btn{ left: 10px; }
  .next-letter-btn{ right: 10px; }

}


body{font-family:"Cinzel",serif;color:#fff;overflow:hidden;background:#000; min-width: 1200px}
.hero{position:relative;width:100%;height:100vh;display:grid;place-items:center;overflow:hidden}

/* VIDEO */
.bg-video{
  position:absolute;top:50%;left:50%;
  width:100vw;height:100vh;object-fit:cover;
  transform:translate(-50%,-50%);
  filter:brightness(.75);transition:opacity 1s ease
}
.bg-layer{
  position:absolute;
  top:50%;
  left:50%;
  width:100vw;
  height:100vh;
  object-fit:cover;
  transform:translate(-50%,-50%);
  opacity:0;
  z-index:0;
  transition:opacity 1.2s ease;
}
.bg-layer.show{
  opacity:1;
}


/* SECOND PAGE IMAGE */
.bg-image{
  position:absolute;inset:0;
  background-size:cover;background-position:center;
  opacity:0;transition:opacity 1.3s ease;
  filter:none;   
  image-rendering: auto;
  filter: contrast(1.08) saturate(1.05);
}


.show{opacity:1}
.overlay{
  background: linear-gradient(
    rgba(0,0,0,0.25),
    rgba(0,0,0,0.35)
  );
}


.content{text-align:center;z-index:4}
h1{font-size:clamp(2rem,5vw,4rem)}
/* --- H1 LETTER ANIMATION --- */
h1{
  font-size:clamp(2rem,5vw,4rem);
  color:#58ea78;
  letter-spacing:0.08em;
}

/* individual letters */
.h1-letter{
  display:inline-block;
  opacity:0;
  transform:translateY(18px);
  animation:
    letterIn 0.6s forwards,
    floatText 4s ease-in-out infinite;
}

/* letter entry */
@keyframes letterIn{
  to{
    opacity:1;
    transform:translateY(0);
    text-shadow:
      0 0 12px rgba(199,215,255,.5),
      0 0 24px rgba(199,215,255,.3);
  }
}

/* gentle floating */
@keyframes floatText{
  0%,100%{ transform:translateY(0); }
  50%{ transform:translateY(-6px); }
}

/* FINAL GLOW */
.h1-glow{
  text-shadow:
    0 0 16px rgba(199,215,255,.9),
    0 0 32px rgba(199,215,255,.6),
    0 0 60px rgba(199,215,255,.45);
}

/* hide subtitle & button initially */
.music,
.enter-btn{
  opacity:0;
  transform:translateY(20px);
  transition:opacity 1s ease, transform 1s ease;
}

/* reveal after heading */
.show-below{
  opacity:1;
  transform:translateY(0);
}

.enter-btn{
  margin-top:10rem;padding:.6rem 1.2rem;
  border-radius:12px;border:1px solid rgba(255,255,255,.18);
  background:rgba(11, 17, 17, 0.584);color:rgb(38, 185, 199);
  cursor:pointer
}
.music{margin-bottom:2rem;font-size:1.1rem}

/* NEXT LETTER */
.next-letter-btn{
  position:fixed;
  bottom:env(safe-area-inset-bottom, 20px);
  padding:.7rem 1.2rem;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.35);
  background:rgba(33, 37, 37, 0.584);
  color:#fff;
  cursor:pointer;
  display:none;
  z-index:9999;
  font-size:1rem;
}

.home-btn{
  left:20px;
}

.next-letter-btn{
  right:20px;
}


/* SPARK */
.wand-spark{
  position:fixed;width:14px;height:14px;
  background:radial-gradient(circle,#fff 10%,#ffe9a8 40%,#ffbf00 70%,transparent);
  border-radius:50%;pointer-events:none;
  animation:fadeSpark .9s forwards;
  box-shadow:0 0 30px gold
}
@keyframes fadeSpark{to{opacity:0;transform:scale(.3)}}

/* PARTICLES */
.particles{position:absolute;inset:0;pointer-events:none}
.particle{
  position:absolute;width:4px;height:4px;
  background:#fff;border-radius:50%;opacity:.6;
  animation:float 10s infinite
}
@keyframes float{50%{transform:translateY(-200px) scale(1.4)}}

/* ENVELOPES */
.hogwarts-envelope{
  position:absolute;
    top:-220px;left:50%;
  transform:translateX(-50%);
  width:260px;height:160px;
  background:#f3e6c8;border:2px solid #c9b27c;
  display:none;cursor:pointer;z-index:6;
  animation:flyIn 1s ease forwards, sway 4s ease-in-out infinite;
  box-shadow:0 0 35px rgba(255,200,100,.6)
}
/* Envelope-specific entry paths */
#env1 {
  animation: flyIn 2.6s ease forwards, sway 4s ease-in-out infinite;
}

#env2 {
  animation: flyInLeft 2.6s ease forwards, sway 4s ease-in-out infinite;
}

#env3 {
  animation: flyInRight 2.6s ease forwards, sway 4s ease-in-out infinite;
}

@keyframes flyIn{to{top:50%}}
@keyframes flyInLeft {
  0% {
    top: -220px;
    left: -260px;
    opacity: 0;
  }
  100% {
    top: 50%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 1;
  }
}

@keyframes flyInRight {
  0% {
    top: -220px;
    left: 120%;
    opacity: 0;
  }
  100% {
    top: 50%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 1;
  }
}

@keyframes sway{50%{transform:translateX(-50%) rotate(2deg)}}

.hogwarts-envelope::before{
  content:"";position:absolute;inset:0;
  background:#ead9ad;
  clip-path:polygon(0 0,50% 55%,100% 0);
  transition:transform .9s ease;transform-origin:top
}
.hogwarts-envelope.open::before{transform:rotateX(180deg)}

.seal{
  position:absolute;width:70px;height:70px;
  left:50%;top:60%;
  transform:translate(-50%,-50%) rotate(-12deg);
  border-radius:48% 54% 43% 57%;
  display:grid;place-items:center;
  font-size:32px;font-weight:700
}
.seal.red{background:#7a0000;color:gold}
.seal.blue{background:#7a0000;color:gold}
.seal.green{background:#7a0000;color:gold}

.letter{
  position:absolute;left:12px;right:12px;bottom:10px;
  height:0;overflow-y:auto;
  background:linear-gradient(rgba(255,255,255,.95),rgba(255,255,255,.95));
  color:#2b1a0f;padding:0 18px;
  transition:height 1.2s ease
}
.hogwarts-envelope.open .letter{height:300px}
.letter p{font-size:15px;line-height:1.6;font-family: "IM Fell English", serif;
  font-style: italic;
  font-weight: 600;
  color: #3a2414;
  letter-spacing: 0.02em;
}

  /* ===== SMALL ALWAYS BUTTON ===== */
#alwaysBtn{
  position:fixed;
  bottom:80px;
  right:22px;
  padding:6px 10px;
  font-size:0.9rem;
  border-radius:50%;
  border:1px solid rgba(255,215,0,.6);
  background:rgba(0,0,0,.6);
  color:gold;
  cursor:pointer;
  opacity:0;
  pointer-events:none;
  z-index:9999;
  box-shadow:0 0 12px gold;
  transition:opacity 1.2s ease, transform 1.2s ease;
}

#alwaysBtn.show{
  opacity:1;
  pointer-events:auto;
  transform:scale(1.1);
}
/* ===== FULL SCREEN ALWAYS OVERLAY ===== */
#alwaysOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.92);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  pointer-events:none;
  transition:opacity 2s ease;
  z-index:99999;
}

#alwaysOverlay.show{
  opacity:1;
  pointer-events:auto;
}

#alwaysText{
  font-size:clamp(3.5rem, 10vw, 7rem);
  letter-spacing:0.4em;
  color:#fff6c9;
  text-shadow:
    0 0 20px #ffd700,
    0 0 50px #ffd700,
    0 0 100px rgba(255,215,0,.9),
    0 0 160px rgba(255,215,0,.8);
  animation:alwaysGlow 4s ease-in-out infinite;
  
}
/* ===== MOUSE-RESPONSIVE GLOW ===== */
#alwaysText{
  --gx: 0px;
  --gy: 0px;
  text-shadow:
    calc(var(--gx) * 0.2) calc(var(--gy) * 0.2) 20px #fff,
    calc(var(--gx) * 0.4) calc(var(--gy) * 0.4) 60px gold,
    calc(var(--gx) * 0.6) calc(var(--gy) * 0.6) 120px rgba(255,215,0,.9),
    calc(var(--gx) * 0.8) calc(var(--gy) * 0.8) 180px rgba(255,215,0,.8);
}

@keyframes alwaysGlow{
  50%{
    text-shadow:
      0 0 30px #fff,
      0 0 80px gold,
      0 0 140px rgba(255,215,0,1),
      0 0 200px rgba(255,215,0,.9);
  }
}

/* ===== WRITING QUILL ===== */
.quill{
  position:absolute;
  left:0;
  top:0;
  font-size:1.4rem;
  opacity:0;
  pointer-events:none;
  filter:drop-shadow(0 0 6px gold);
  transform:translate(0,0) rotate(-10deg);
  transition:transform .05s linear, opacity .3s ease;
}

.hogwarts-envelope.open .quill{
  opacity:1;
}


@keyframes quillFloat{
  50%{
    transform:translate(var(--qx), calc(var(--qy) - 6px)) rotate(-12deg);
  }
}


</style>
</head>

<body>
<main class="hero">

<video id="bgVideo" class="bg-video" autoplay muted loop playsinline>
  <source src="video1(copy).mp4" type="video/mp4">
</video>

<div id="bg1" class="bg-image" style="background-image:url('image16.jpg')"></div>
<div class="overlay"></div>
<div class="particles" id="particles"></div>
<video id="bg2" class="bg-video bg-layer" muted loop playsinline preload="auto">
  <source src="video3.mp4" type="video/mp4">
</video>

<video id="bg3" class="bg-video bg-layer" muted loop playsinline preload="auto">
  <source src="video7.mp4" type="video/mp4">
</video>



<div class="content" id="mainContent">
  <h1 id="magicTitle">A Magic Beyond the Lessons!</h1>

<p class="music" id="subtitle">
  <strong>Step softly‚Ä¶ Magic listens.<br>
  Click anywhere before entering to awaken the enchantment.</strong>
</p>

<a class="enter-btn" id="enterCastle">A Little Further</a>

</div>

<button class="next-letter-btn" id="nextLetter">Next Letter ‚Üí</button>

<!-- Envelope 1 -->
<div id="env1" class="hogwarts-envelope">
  <div class="seal red">H</div>
  <div class="letter"><p id="text1">
    <div class="quill">ü™∂</div>
  </p></div>
</div>

<!-- Envelope 2 -->
<div id="env2" class="hogwarts-envelope">
  <div class="seal blue">H</div>
  <div class="letter"><p id="text2">
    <div class="quill">ü™∂</div>
  </p></div>
</div>

<!-- Envelope 3 -->
<div id="env3" class="hogwarts-envelope">
  <div class="seal green">H</div>
  <div class="letter"><p id="text3">
    <div class="quill">ü™∂</div>
  </p></div>
</div>
<!-- Small ALWAYS button -->
<button id="alwaysBtn">‚ú®</button>
<!-- FULL SCREEN ALWAYS -->
<div id="alwaysOverlay">
  <div id="alwaysText">ALWAYS!!!</div>
</div>

</main>

<script>
const envs = [env1, env2, env3];
const texts = [text1, text2, text3];
const backgrounds = [bg1, bg2, bg3];

const messages=[
  "Maaaaaammmm!!! \n En kodbeku gottaglilla. Wanted to thank you differently for everything till today. \n COSMOBIT article inda gottaytu nimge Harry Potter ista anta so one small try to make you smile. Illu maatadtidini anta baikobedi....üòÅ",
  "Whole 2k22 batch ge gottu (and even Chatgpt knows now) CSE dept alli nan favourite yaru anta. \n From SCR to GT, TOC, GenAI, and finally to Infosys: 'ONE PERSON + CONSTANT SUPPORT'‚ú®. \n You will get new batch of students every new year (which may make you forget me) par...\n\n Agar kabhi meri yaad chupchaap aa jaaye, toh use apki ek chhoti si muskaan ke saath jaane dena üå∏.      No more blah blah.... One last click!!!" ,
  "Your support have been my wand and my shield ü™Ñüõ°Ô∏è. \n Your encouragement is the Reparo on my confidence, Protego on my fears, and Lumos on every dark path I walked. \n Remember me the way Hogwarts remembers its magic......‚ù§Ô∏èüíö"
];

let current=0;

function typeText(el, msg){
  let i = 0;
  el.innerHTML = "";

  const letterBox = el.closest(".letter");
  const quill = letterBox.querySelector(".quill");
  quill.style.opacity = "1";

  (function t(){
    if (i < msg.length) {

      if (msg[i] === "\n") {
        el.appendChild(document.createElement("br"));
        i++;
      } else {
        const span = document.createElement("span");
        span.textContent = msg[i++];
        el.appendChild(span);

        // move quill to this character
        const rect = span.getBoundingClientRect();
        const parentRect = letterBox.getBoundingClientRect();

        quill.style.transform = `
          translate(
            ${rect.left - parentRect.left + rect.width}px,
            ${rect.top - parentRect.top + rect.height}px
          )
          rotate(-12deg)
        `;
      }

      setTimeout(t, 35);
    } else {
      quill.style.opacity = "0";
    }
  })();
}



envs.forEach((env,i)=>{
  env.onclick=()=>{
    if(!env.classList.contains("open")){
      env.classList.add("open");
      typeText(texts[i],messages[i]);
    }else{
      env.classList.remove("open");
      texts[i].innerHTML="";
    }
  };
});

enterCastle.onclick=()=>{
  bgVideo.style.opacity=0;
  bgVideo.pause();
  bg1.classList.add("show");
  mainContent.style.display="none";
  setTimeout(()=>{
    envs[0].style.display="block";
    nextLetter.style.display="block";
},1000);
}

nextLetter.onclick = () => {
  // hide current envelope
  envs[current].style.display = "none";

  // hide current background
  // hide current background
backgrounds[current].classList.remove("show");
if (backgrounds[current].tagName === "VIDEO") {
  backgrounds[current].pause();
  backgrounds[current].currentTime = 0;
}

  current++;

  if (current < envs.length) {

    // show next background
backgrounds[current].classList.add("show");

if (backgrounds[current].tagName === "VIDEO") {
  backgrounds[current].play().catch(()=>{});
}

    // üîÅ RESET animation so entry direction replays
    envs[current].style.animation = "none";
    envs[current].offsetHeight; // force browser reflow
    envs[current].style.animation = "";

    // show next envelope
    envs[current].style.display = "block";

    // hide button on last letter
    if (current === envs.length - 1) {
      nextLetter.style.display = "none";
    }
  }
};
;

const bgMusic=new Audio("hp-theme.mp3");
bgMusic.loop=true;bgMusic.volume=.85;
document.body.addEventListener("click",()=>bgMusic.play(),{once:true});


for(let i=0;i<60;i++){
  const p=document.createElement("div");
  p.className="particle";
  p.style.left=Math.random()*100+"%";
  p.style.top=Math.random()*100+"%";
  particles.appendChild(p);
}

document.addEventListener("mousemove",e=>{
  const s=document.createElement("div");
  s.className="wand-spark";
  s.style.left=e.clientX+"px";
  s.style.top=e.clientY+"px";
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),600);
});

const title = document.getElementById("magicTitle");
const subtitle = document.getElementById("subtitle");
const enterBtn = document.getElementById("enterCastle");

const titleText = title.innerText;
title.innerHTML = "";

[...titleText].forEach((char, i) => {
  const span = document.createElement("span");
  span.textContent = char === " " ? "\u00A0" : char;
  span.className = "h1-letter";
  span.style.animationDelay = `${i * 0.08}s`;
  title.appendChild(span);
});

/* After full title animation */
const totalTime = titleText.length * 80 + 400;

setTimeout(() => {
  title.classList.add("h1-glow");

  subtitle.classList.add("show-below");
  enterBtn.classList.add("show-below");
}, totalTime);

/* ===== SHOW ALWAYS BUTTON AFTER LAST LETTER ===== */
envs[2].addEventListener("click", () => {
  setTimeout(() => {
    document.getElementById("alwaysBtn").classList.add("show");
  }, 2500);
});

/* ===== ALWAYS FULL SCREEN ACTION ===== */
const alwaysBtn = document.getElementById("alwaysBtn");
const alwaysOverlay = document.getElementById("alwaysOverlay");

alwaysBtn.addEventListener("click", () => {
  alwaysOverlay.classList.add("show");
});
/* ===== MOUSE RESPONSIVE GLOW ===== */
const alwaysText = document.getElementById("alwaysText");

document.addEventListener("mousemove", (e) => {
  if (!alwaysOverlay.classList.contains("show")) return;

  const x = (e.clientX / window.innerWidth - 0.5) * 60;
  const y = (e.clientY / window.innerHeight - 0.5) * 60;

  alwaysText.style.setProperty("--gx", `${x}px`);
  alwaysText.style.setProperty("--gy", `${y}px`);
});

</script>

</body>
</html>
